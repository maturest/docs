<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络协议与应用 | Maturest</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/docs/logo.png">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/docs/assets/css/0.styles.28d5d7d1.css" as="style"><link rel="preload" href="/docs/assets/js/app.b536fab4.js" as="script"><link rel="preload" href="/docs/assets/js/2.6b092d03.js" as="script"><link rel="preload" href="/docs/assets/js/44.4366a197.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a067b955.js"><link rel="prefetch" href="/docs/assets/js/11.5bd500de.js"><link rel="prefetch" href="/docs/assets/js/12.9bacf782.js"><link rel="prefetch" href="/docs/assets/js/13.26bda921.js"><link rel="prefetch" href="/docs/assets/js/14.e7d2095c.js"><link rel="prefetch" href="/docs/assets/js/15.be195a35.js"><link rel="prefetch" href="/docs/assets/js/16.70de09e0.js"><link rel="prefetch" href="/docs/assets/js/17.e0c91821.js"><link rel="prefetch" href="/docs/assets/js/18.f94f6d75.js"><link rel="prefetch" href="/docs/assets/js/19.4755d8b5.js"><link rel="prefetch" href="/docs/assets/js/20.49599cda.js"><link rel="prefetch" href="/docs/assets/js/21.4cf06687.js"><link rel="prefetch" href="/docs/assets/js/22.0ab2c321.js"><link rel="prefetch" href="/docs/assets/js/23.b8db3a01.js"><link rel="prefetch" href="/docs/assets/js/24.adef48df.js"><link rel="prefetch" href="/docs/assets/js/25.3afd6380.js"><link rel="prefetch" href="/docs/assets/js/26.821aeade.js"><link rel="prefetch" href="/docs/assets/js/27.4a61f301.js"><link rel="prefetch" href="/docs/assets/js/28.3b732e06.js"><link rel="prefetch" href="/docs/assets/js/29.e91447fc.js"><link rel="prefetch" href="/docs/assets/js/3.9b6ac9a3.js"><link rel="prefetch" href="/docs/assets/js/30.c81856d3.js"><link rel="prefetch" href="/docs/assets/js/31.be21cb17.js"><link rel="prefetch" href="/docs/assets/js/32.b8ed06ff.js"><link rel="prefetch" href="/docs/assets/js/33.d0d0a311.js"><link rel="prefetch" href="/docs/assets/js/34.f1d25a96.js"><link rel="prefetch" href="/docs/assets/js/35.af6ccb55.js"><link rel="prefetch" href="/docs/assets/js/36.22e23bb7.js"><link rel="prefetch" href="/docs/assets/js/37.221c13ef.js"><link rel="prefetch" href="/docs/assets/js/38.d5de19b9.js"><link rel="prefetch" href="/docs/assets/js/39.5cf15ea3.js"><link rel="prefetch" href="/docs/assets/js/4.4669c6e2.js"><link rel="prefetch" href="/docs/assets/js/40.ddb71b7d.js"><link rel="prefetch" href="/docs/assets/js/41.b0b91d98.js"><link rel="prefetch" href="/docs/assets/js/42.93515f53.js"><link rel="prefetch" href="/docs/assets/js/43.4570f57f.js"><link rel="prefetch" href="/docs/assets/js/45.0f7338fb.js"><link rel="prefetch" href="/docs/assets/js/46.8f4858ed.js"><link rel="prefetch" href="/docs/assets/js/47.e101934c.js"><link rel="prefetch" href="/docs/assets/js/48.3dc88ed4.js"><link rel="prefetch" href="/docs/assets/js/49.ddccd823.js"><link rel="prefetch" href="/docs/assets/js/5.91c18d5d.js"><link rel="prefetch" href="/docs/assets/js/50.b0d1d8d8.js"><link rel="prefetch" href="/docs/assets/js/51.e6e2105f.js"><link rel="prefetch" href="/docs/assets/js/52.f9ca7859.js"><link rel="prefetch" href="/docs/assets/js/53.a485c3b3.js"><link rel="prefetch" href="/docs/assets/js/54.370ac59f.js"><link rel="prefetch" href="/docs/assets/js/55.76e35693.js"><link rel="prefetch" href="/docs/assets/js/56.13139312.js"><link rel="prefetch" href="/docs/assets/js/57.957272f6.js"><link rel="prefetch" href="/docs/assets/js/58.d686f5af.js"><link rel="prefetch" href="/docs/assets/js/59.a073af2d.js"><link rel="prefetch" href="/docs/assets/js/6.4e53a11e.js"><link rel="prefetch" href="/docs/assets/js/60.b0fb4042.js"><link rel="prefetch" href="/docs/assets/js/61.3f49c3e8.js"><link rel="prefetch" href="/docs/assets/js/62.aa3ebd64.js"><link rel="prefetch" href="/docs/assets/js/63.417ee98f.js"><link rel="prefetch" href="/docs/assets/js/64.9127f853.js"><link rel="prefetch" href="/docs/assets/js/65.8f53aa11.js"><link rel="prefetch" href="/docs/assets/js/66.bac6e419.js"><link rel="prefetch" href="/docs/assets/js/67.9c346682.js"><link rel="prefetch" href="/docs/assets/js/68.d63e9bd8.js"><link rel="prefetch" href="/docs/assets/js/69.be11a685.js"><link rel="prefetch" href="/docs/assets/js/7.07189bd2.js"><link rel="prefetch" href="/docs/assets/js/70.d0d4efd7.js"><link rel="prefetch" href="/docs/assets/js/71.ebb85798.js"><link rel="prefetch" href="/docs/assets/js/72.a6ba95de.js"><link rel="prefetch" href="/docs/assets/js/73.b49c8539.js"><link rel="prefetch" href="/docs/assets/js/74.a1fc6698.js"><link rel="prefetch" href="/docs/assets/js/75.2cbd6929.js"><link rel="prefetch" href="/docs/assets/js/76.81cd3f3a.js"><link rel="prefetch" href="/docs/assets/js/77.c6c54c53.js"><link rel="prefetch" href="/docs/assets/js/78.d7ec4181.js"><link rel="prefetch" href="/docs/assets/js/79.07625988.js"><link rel="prefetch" href="/docs/assets/js/8.14ddab3e.js"><link rel="prefetch" href="/docs/assets/js/80.2300f0a3.js"><link rel="prefetch" href="/docs/assets/js/9.98b06d80.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.28d5d7d1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Maturest</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/author/" class="nav-link">
  关于作者
</a></div><div class="nav-item"><a href="/docs/back/ai/" class="nav-link">
  AIGC
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/es/" class="nav-link">
  Es
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/uni-app/" class="nav-link">
  Uni-App
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/python/" class="nav-link router-link-active">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mysql/" class="nav-link">
  Mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cache" class="dropdown-title"><span class="title">缓存</span> <span class="arrow down"></span></button> <button type="button" aria-label="Cache" class="mobile-dropdown-title"><span class="title">缓存</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/memcached/" class="nav-link">
  Memcached
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mongodb/" class="nav-link">
  Mongodb
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/elasticsearch/" class="nav-link">
  Elasticsearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Operation" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="Operation" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/operation/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/composer/" class="nav-link">
  Composer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programs" class="dropdown-title"><span class="title">项目经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programs" class="mobile-dropdown-title"><span class="title">项目经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/programs/h5/" class="nav-link">
  H5项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/mini-program/" class="nav-link">
  小程序项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/web/" class="nav-link">
  PC端项目
</a></li></ul></div></div> <a href="https://github.com/maturest/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/author/" class="nav-link">
  关于作者
</a></div><div class="nav-item"><a href="/docs/back/ai/" class="nav-link">
  AIGC
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/es/" class="nav-link">
  Es
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/uni-app/" class="nav-link">
  Uni-App
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/python/" class="nav-link router-link-active">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mysql/" class="nav-link">
  Mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cache" class="dropdown-title"><span class="title">缓存</span> <span class="arrow down"></span></button> <button type="button" aria-label="Cache" class="mobile-dropdown-title"><span class="title">缓存</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/memcached/" class="nav-link">
  Memcached
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mongodb/" class="nav-link">
  Mongodb
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/elasticsearch/" class="nav-link">
  Elasticsearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Operation" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="Operation" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/operation/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/composer/" class="nav-link">
  Composer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programs" class="dropdown-title"><span class="title">项目经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programs" class="mobile-dropdown-title"><span class="title">项目经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/programs/h5/" class="nav-link">
  H5项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/mini-program/" class="nav-link">
  小程序项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/web/" class="nav-link">
  PC端项目
</a></li></ul></div></div> <a href="https://github.com/maturest/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/docs/back/python/" aria-current="page" class="sidebar-link">Python 环境准备</a></li><li><a href="/docs/back/python/editor.html" class="sidebar-link">编辑器配置</a></li><li><a href="/docs/back/python/scriptstructure.html" class="sidebar-link">脚本结构</a></li><li><a href="/docs/back/python/branch.html" class="sidebar-link">分支结构</a></li><li><a href="/docs/back/python/loop.html" class="sidebar-link">循环结构</a></li><li><a href="/docs/back/python/program_logic.html" class="sidebar-link">程序逻辑</a></li><li><a href="/docs/back/python/func_module.html" class="sidebar-link">函数和模块</a></li><li><a href="/docs/back/python/structure.html" class="sidebar-link">数据结构</a></li><li><a href="/docs/back/python/object.html" class="sidebar-link">面向对象</a></li><li><a href="/docs/back/python/file.html" class="sidebar-link">文件和异常</a></li><li><a href="/docs/back/python/proccess_thread.html" class="sidebar-link">进程和线程</a></li><li><a href="/docs/back/python/application.html" aria-current="page" class="active sidebar-link">网络协议与应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/back/python/application.html#网络协议与应用" class="sidebar-link">网络协议与应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/back/python/application.html#http协议" class="sidebar-link">HTTP协议</a></li><li class="sidebar-sub-header"><a href="/docs/back/python/application.html#tcp套接字" class="sidebar-link">TCP套接字</a></li><li class="sidebar-sub-header"><a href="/docs/back/python/application.html#udp套接字" class="sidebar-link">UDP套接字</a></li><li class="sidebar-sub-header"><a href="/docs/back/python/application.html#网络应用开发" class="sidebar-link">网络应用开发</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="网络协议与应用"><a href="#网络协议与应用" class="header-anchor">#</a> 网络协议与应用</h2> <h3 id="http协议"><a href="#http协议" class="header-anchor">#</a> HTTP协议</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> time <span class="token keyword">import</span> time
<span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread

<span class="token keyword">import</span> requests

<span class="token keyword">class</span> <span class="token class-name">DownloadHandler</span><span class="token punctuation">(</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>url <span class="token operator">=</span> url

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        filename <span class="token operator">=</span> self<span class="token punctuation">.</span>url<span class="token punctuation">[</span>self<span class="token punctuation">.</span>url<span class="token punctuation">.</span>rfind<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
        resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'imgs/'</span><span class="token operator">+</span> filename<span class="token punctuation">,</span><span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>content<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.mxnzp.com/api/image/girl/list?page=1&amp;app_id=&amp;app_secret='</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    img_list <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> img <span class="token keyword">in</span> img_list<span class="token punctuation">:</span>
        url <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token string">'imageUrl'</span><span class="token punctuation">]</span>
        DownloadHandler<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="tcp套接字"><a href="#tcp套接字" class="header-anchor">#</a> TCP套接字</h3> <blockquote><p>在Python中也可以基于套接字来使用传输层提供的传输服务，并基于此开发自己的网络应用。实际开发中使用的套接字可以分为三类：流套接字（TCP套接字）、数据报套接字（UDP套接字）和原始套接字</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
    基于TCP套接字创建一个时间日期的服务器
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> socket <span class="token keyword">import</span> socket<span class="token punctuation">,</span>SOCK_STREAM<span class="token punctuation">,</span>AF_INET
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建套接字对象并制定使用哪种传输服务</span>
    <span class="token comment"># family=AF_INET - IPv4地址</span>
    <span class="token comment"># family=AF_INET6 - IPv6地址</span>
    <span class="token comment"># type=SOCK_STREAM - TCP套接字</span>
    <span class="token comment"># type=SOCK_DGRAM - UDP套接字</span>
    <span class="token comment"># type=SOCK_RAW - 原始套接字</span>
    server <span class="token operator">=</span> socket<span class="token punctuation">(</span>family<span class="token operator">=</span>AF_INET<span class="token punctuation">,</span><span class="token builtin">type</span><span class="token operator">=</span>SOCK_STREAM<span class="token punctuation">)</span>
    <span class="token comment"># 绑定IP地址和端口,同一时间，在同一个端口上只能绑定一个服务</span>
    server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'192.168.2.115'</span><span class="token punctuation">,</span><span class="token number">6789</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 开启监听 </span>
    server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器启动，开始监听。。。'</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment"># 通过循环，接收客户端的连接并做出相应的处理</span>
        <span class="token comment"># accept 是一个阻塞方法，如果没有客户端连接到服务器，代码不会向下执行</span>
        client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'连接到了服务器'</span><span class="token punctuation">)</span>

        <span class="token comment"># 发送数据</span>
        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 断开连接</span>
        client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>上面创建了服务器，那么下面就是建立了客户端</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
    创建一个客户端
&quot;&quot;&quot;</span>

<span class="token keyword">from</span> socket <span class="token keyword">import</span> socket

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建套接字对象默认使用IPV4和tcp协议</span>
    client <span class="token operator">=</span> socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 连接到服务器，指定IP和端口</span>
    client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'192.168.2.115'</span><span class="token punctuation">,</span><span class="token number">6789</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 从服务器接收数据</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 断开连接</span>
    client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>TCP套接字的使用需要以下步骤：</p> <ul><li><p>创建套接字：在客户端和服务器端，应用程序首先创建一个套接字对象。</p></li> <li><p>绑定地址和端口：在服务器端，套接字需要绑定到一个特定的IP地址和端口号上，以便客户端能够连接到它。</p></li> <li><p>监听连接请求（仅服务器端）：服务器端的套接字开始监听来自客户端的连接请求。</p></li> <li><p>建立连接：三次握手（只是用户建立和确认连接）</p></li></ul> <p>第一次：发起连接</p> <p>客户端向服务端请求建立连接，发送一个SYN（同步）数据包，进入SYN_SENT(同步已发送)状态，等到服务器的确认。</p> <p>第二次：确认连接请求，发送连接请求</p> <p>服务器确认连接请求，回复给客户端一个ACK（确认）数据包，同时也会发送一个SYN数据包给客户端，服务器已进入SYN_RECV（同步已接收）状态，等待客户端的确认。</p> <p>第三次：完成连接</p> <p>客户端手段服务器的ACK+SYN数据包后，会向服务器发送一个ACK数据包进行确认。表示客户端已经准备好就收数据了。</p> <p>简单理解一下：首先客户端告诉服务器，我已经发数据给你了，你收到了吗？，客户端收到数据之后，告诉客户端，我收到了，我已经准备好接收数据了，客户端说好嘞，那我发了。</p> <blockquote><p>在三次握手过程中，每次发送的数据包都不包含实际的数据内容，只是用于建立和确认连接。当三次握手完成后，客户端和服务器就可以开始传输实际的数据了。</p></blockquote> <ul><li><p>数据传输：连接建立后，客户端和服务器就可以通过套接字发送和接收数据了。</p></li> <li><p>关闭连接：数据传输完成后，客户端和服务器都会关闭套接字以释放资源。关闭连接的过程通常包括四次挥手。</p></li></ul> <h3 id="udp套接字"><a href="#udp套接字" class="header-anchor">#</a> UDP套接字</h3> <blockquote><p>传输层除了有可靠的传输协议TCP之外，还有一种非常轻便的传输协议叫做用户数据报协议，简称UDP。TCP和UDP都是提供端到端传输服务的协议，二者的差别就如同打电话和发短信的区别，后者不对传输的可靠性和可达性做出任何承诺从而避免了TCP中握手和重传的开销，所以在强调性能和而不是数据完整性的场景中（例如传输网络音视频数据），UDP可能是更好的选择。可能大家会注意到一个现象，就是在观看网络视频时，有时会出现卡顿，有时会出现花屏，这无非就是部分数据传丢或传错造成的。</p></blockquote> <h3 id="网络应用开发"><a href="#网络应用开发" class="header-anchor">#</a> 网络应用开发</h3> <p>发送短信，发送电子邮件（基于SMTP简单邮件传输协议）</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/maturest/docs/edit/master/back/python/application.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">6/28/2024, 6:37:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/back/python/proccess_thread.html" class="prev">
        进程和线程
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b536fab4.js" defer></script><script src="/docs/assets/js/2.6b092d03.js" defer></script><script src="/docs/assets/js/44.4366a197.js" defer></script>
  </body>
</html>
