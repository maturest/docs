<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>索引 | Maturest</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/docs/logo.png">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/docs/assets/css/0.styles.cffabbe3.css" as="style"><link rel="preload" href="/docs/assets/js/app.12904a86.js" as="script"><link rel="preload" href="/docs/assets/js/2.6b092d03.js" as="script"><link rel="preload" href="/docs/assets/js/44.eba4df18.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a067b955.js"><link rel="prefetch" href="/docs/assets/js/11.727283e8.js"><link rel="prefetch" href="/docs/assets/js/12.35e894cc.js"><link rel="prefetch" href="/docs/assets/js/13.0cd9c785.js"><link rel="prefetch" href="/docs/assets/js/14.94fe64f0.js"><link rel="prefetch" href="/docs/assets/js/15.f77c69d4.js"><link rel="prefetch" href="/docs/assets/js/16.70de09e0.js"><link rel="prefetch" href="/docs/assets/js/17.e0c91821.js"><link rel="prefetch" href="/docs/assets/js/18.c599fc32.js"><link rel="prefetch" href="/docs/assets/js/19.5e0bf096.js"><link rel="prefetch" href="/docs/assets/js/20.49599cda.js"><link rel="prefetch" href="/docs/assets/js/21.4cf06687.js"><link rel="prefetch" href="/docs/assets/js/22.0ab2c321.js"><link rel="prefetch" href="/docs/assets/js/23.b4370f4a.js"><link rel="prefetch" href="/docs/assets/js/24.adef48df.js"><link rel="prefetch" href="/docs/assets/js/25.9c896fe7.js"><link rel="prefetch" href="/docs/assets/js/26.91a17594.js"><link rel="prefetch" href="/docs/assets/js/27.e4fff42f.js"><link rel="prefetch" href="/docs/assets/js/28.5d09ab73.js"><link rel="prefetch" href="/docs/assets/js/29.77548f89.js"><link rel="prefetch" href="/docs/assets/js/3.54f77903.js"><link rel="prefetch" href="/docs/assets/js/30.cdc48f88.js"><link rel="prefetch" href="/docs/assets/js/31.be21cb17.js"><link rel="prefetch" href="/docs/assets/js/32.34fdb899.js"><link rel="prefetch" href="/docs/assets/js/33.c07c65f9.js"><link rel="prefetch" href="/docs/assets/js/34.06f60228.js"><link rel="prefetch" href="/docs/assets/js/35.3f7f69a9.js"><link rel="prefetch" href="/docs/assets/js/36.94d5426a.js"><link rel="prefetch" href="/docs/assets/js/37.81856326.js"><link rel="prefetch" href="/docs/assets/js/38.a44872d0.js"><link rel="prefetch" href="/docs/assets/js/39.a0903bc2.js"><link rel="prefetch" href="/docs/assets/js/4.48af2b25.js"><link rel="prefetch" href="/docs/assets/js/40.2e15c53d.js"><link rel="prefetch" href="/docs/assets/js/41.55fd61a9.js"><link rel="prefetch" href="/docs/assets/js/42.8ad1ef1e.js"><link rel="prefetch" href="/docs/assets/js/43.0700deda.js"><link rel="prefetch" href="/docs/assets/js/45.8b902261.js"><link rel="prefetch" href="/docs/assets/js/46.1057230b.js"><link rel="prefetch" href="/docs/assets/js/47.b187b3f6.js"><link rel="prefetch" href="/docs/assets/js/48.907de7ce.js"><link rel="prefetch" href="/docs/assets/js/49.11d57bb7.js"><link rel="prefetch" href="/docs/assets/js/5.925cb319.js"><link rel="prefetch" href="/docs/assets/js/50.73de7850.js"><link rel="prefetch" href="/docs/assets/js/51.e588bc51.js"><link rel="prefetch" href="/docs/assets/js/52.60a5fb45.js"><link rel="prefetch" href="/docs/assets/js/53.3354525f.js"><link rel="prefetch" href="/docs/assets/js/54.150d7def.js"><link rel="prefetch" href="/docs/assets/js/55.042b302a.js"><link rel="prefetch" href="/docs/assets/js/56.d9686395.js"><link rel="prefetch" href="/docs/assets/js/57.b7ddbc6c.js"><link rel="prefetch" href="/docs/assets/js/58.15b099ef.js"><link rel="prefetch" href="/docs/assets/js/59.d0f4b6d6.js"><link rel="prefetch" href="/docs/assets/js/6.4e53a11e.js"><link rel="prefetch" href="/docs/assets/js/60.3e9a174f.js"><link rel="prefetch" href="/docs/assets/js/61.d56b9adb.js"><link rel="prefetch" href="/docs/assets/js/62.0352e0b0.js"><link rel="prefetch" href="/docs/assets/js/63.e8f0a017.js"><link rel="prefetch" href="/docs/assets/js/64.c4d236b9.js"><link rel="prefetch" href="/docs/assets/js/65.375900e5.js"><link rel="prefetch" href="/docs/assets/js/66.c426e387.js"><link rel="prefetch" href="/docs/assets/js/67.f4bd25d5.js"><link rel="prefetch" href="/docs/assets/js/68.ebf2f4e3.js"><link rel="prefetch" href="/docs/assets/js/69.f7b1c953.js"><link rel="prefetch" href="/docs/assets/js/7.07189bd2.js"><link rel="prefetch" href="/docs/assets/js/70.351f9258.js"><link rel="prefetch" href="/docs/assets/js/71.f7694a5e.js"><link rel="prefetch" href="/docs/assets/js/72.44a5cc51.js"><link rel="prefetch" href="/docs/assets/js/73.8a0d67ec.js"><link rel="prefetch" href="/docs/assets/js/74.6fc0a4e2.js"><link rel="prefetch" href="/docs/assets/js/75.b02b2401.js"><link rel="prefetch" href="/docs/assets/js/76.c761859a.js"><link rel="prefetch" href="/docs/assets/js/77.0437736d.js"><link rel="prefetch" href="/docs/assets/js/78.72d9ea2c.js"><link rel="prefetch" href="/docs/assets/js/79.720d7bab.js"><link rel="prefetch" href="/docs/assets/js/8.b8e65c25.js"><link rel="prefetch" href="/docs/assets/js/80.f7707888.js"><link rel="prefetch" href="/docs/assets/js/81.7a75e41b.js"><link rel="prefetch" href="/docs/assets/js/82.a1689299.js"><link rel="prefetch" href="/docs/assets/js/83.56188484.js"><link rel="prefetch" href="/docs/assets/js/84.1e32057c.js"><link rel="prefetch" href="/docs/assets/js/85.361b193e.js"><link rel="prefetch" href="/docs/assets/js/86.3b314daa.js"><link rel="prefetch" href="/docs/assets/js/87.6942d124.js"><link rel="prefetch" href="/docs/assets/js/9.98b06d80.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.cffabbe3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Maturest</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/author/" class="nav-link">
  关于作者
</a></div><div class="nav-item"><a href="/docs/back/ai/" class="nav-link">
  AIGC
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/es/" class="nav-link">
  Es
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/uni-app/" class="nav-link">
  Uni-App
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mysql/" class="nav-link router-link-active">
  Mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cache" class="dropdown-title"><span class="title">缓存</span> <span class="arrow down"></span></button> <button type="button" aria-label="Cache" class="mobile-dropdown-title"><span class="title">缓存</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/memcached/" class="nav-link">
  Memcached
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mongodb/" class="nav-link">
  Mongodb
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/elasticsearch/" class="nav-link">
  Elasticsearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Operation" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="Operation" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/operation/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/composer/" class="nav-link">
  Composer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programs" class="dropdown-title"><span class="title">项目经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programs" class="mobile-dropdown-title"><span class="title">项目经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/programs/h5/" class="nav-link">
  H5项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/mini-program/" class="nav-link">
  小程序项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/web/" class="nav-link">
  PC端项目
</a></li></ul></div></div> <a href="https://github.com/maturest/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/author/" class="nav-link">
  关于作者
</a></div><div class="nav-item"><a href="/docs/back/ai/" class="nav-link">
  AIGC
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front end" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front end" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/es/" class="nav-link">
  Es
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/docs/front/uni-app/" class="nav-link">
  Uni-App
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Back end" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Back end" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/php/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/laravel/" class="nav-link">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mysql/" class="nav-link router-link-active">
  Mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cache" class="dropdown-title"><span class="title">缓存</span> <span class="arrow down"></span></button> <button type="button" aria-label="Cache" class="mobile-dropdown-title"><span class="title">缓存</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/back/memcached/" class="nav-link">
  Memcached
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/mongodb/" class="nav-link">
  Mongodb
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/elasticsearch/" class="nav-link">
  Elasticsearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Operation" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="Operation" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/operation/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/back/composer/" class="nav-link">
  Composer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Programs" class="dropdown-title"><span class="title">项目经验</span> <span class="arrow down"></span></button> <button type="button" aria-label="Programs" class="mobile-dropdown-title"><span class="title">项目经验</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/programs/h5/" class="nav-link">
  H5项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/mini-program/" class="nav-link">
  小程序项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/programs/web/" class="nav-link">
  PC端项目
</a></li></ul></div></div> <a href="https://github.com/maturest/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/docs/back/mysql/" aria-current="page" class="sidebar-link">基本命令</a></li><li><a href="/docs/back/mysql/DDL.html" class="sidebar-link">DDL</a></li><li><a href="/docs/back/mysql/DML.html" class="sidebar-link">DML</a></li><li><a href="/docs/back/mysql/DQL.html" class="sidebar-link">DQL</a></li><li><a href="/docs/back/mysql/DCL.html" class="sidebar-link">DCL</a></li><li><a href="/docs/back/mysql/view.html" class="sidebar-link">视图函数与过程</a></li><li><a href="/docs/back/mysql/primary.html" aria-current="page" class="active sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/back/mysql/primary.html#索引" class="sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/back/mysql/primary.html#索引类型" class="sidebar-link">索引类型：</a></li><li class="sidebar-sub-header"><a href="/docs/back/mysql/primary.html#explain" class="sidebar-link">EXPLAIN</a></li></ul></li></ul></li><li><a href="/docs/back/mysql/left_prefix.html" class="sidebar-link">最左前缀原则</a></li><li><a href="/docs/back/mysql/slow.html" class="sidebar-link">慢查询</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <blockquote><p>索引是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用B树（如B+树）,全文索引和 R 树索引等数据结构。</p></blockquote> <p>作用：</p> <ul><li><p>加快数据检索速度：通过索引，数据库系统可以不必扫描整个表，而是直接定位到数据的存储位置。</p></li> <li><p>加快表与表之间的连接：在实现数据的参考完整性时，通过在表中创建外键索引，可以加快表与表之间的连接速度。</p></li> <li><p>减少分组和排序时间：通过索引，可以加快分组和排序的速度，因为索引本身就是有序的。</p></li></ul> <h3 id="索引类型"><a href="#索引类型" class="header-anchor">#</a> 索引类型：</h3> <p>MySQL支持多种索引类型，包括普通索引（INDEX）、唯一索引（UNIQUE）、主键索引（PRIMARY KEY）、全文索引（FULLTEXT）和空间索引（SPATIAL）等。其中，主键索引是一种特殊的唯一索引，它不允许有空值。</p> <h4 id="普通索引-normal-index"><a href="#普通索引-normal-index" class="header-anchor">#</a> 普通索引（Normal Index）</h4> <ul><li><p>特点：最基本的索引类型，没有唯一性约束，允许索引列中存在重复值和空值。</p></li> <li><p>用途：主要用于提高查询速度，尤其适用于那些经常出现在查询条件（WHERE）或排序条件（ORDER BY）中的列。</p></li> <li><p>使用场景：假设有一个用户表（users），其中包含用户ID（user_id）、用户名（username）和邮箱（email）等字段。如果经常需要根据用户名查询用户信息，那么可以在username字段上创建普通索引。</p></li></ul> <h4 id="唯一索引-unique-index"><a href="#唯一索引-unique-index" class="header-anchor">#</a> 唯一索引（Unique Index）</h4> <ul><li><p>特点：索引列中的值必须是唯一的，但允许存在空值（NULL）。</p></li> <li><p>用途：确保表中每一行数据的唯一性，防止数据重复插入。</p></li> <li><p>使用场景：在注册用户时，可以使用唯一索引来确保用户名的唯一性，避免用户名的重复注册。</p></li></ul> <h4 id="主键索引-primary-key-index"><a href="#主键索引-primary-key-index" class="header-anchor">#</a> 主键索引（Primary Key Index）</h4> <ul><li><p>特点：一种特殊的唯一索引，不允许存在空值（NULL），且一个表只能有一个主键索引。</p></li> <li><p>用途：唯一标识数据库表中的每条记录，常用于表的主键列。</p></li> <li><p>使用场景：在用户表（users）中，通常将用户ID（user_id）设置为主键，并创建主键索引，以确保每个用户都有一个唯一的标识符。</p></li></ul> <h4 id="组合索引-composite-index"><a href="#组合索引-composite-index" class="header-anchor">#</a> 组合索引（Composite Index）</h4> <ul><li><p>特点：在表中的多个字段组合上创建的索引，使用时需要遵循最左前缀原则。</p></li> <li><p>用途：提高基于多个列查询的性能，特别是当查询条件中经常同时出现这些列时。</p></li> <li><p>使用场景：假设有一个订单表（orders），其中包含订单ID（order_id）、用户ID（user_id）和订单日期（order_date）等字段。如果经常需要根据用户ID和订单日期查询订单信息，那么可以在user_id和order_date字段上创建组合索引。</p></li></ul> <h4 id="全文索引-full-text-index"><a href="#全文索引-full-text-index" class="header-anchor">#</a> 全文索引（Full-text Index）</h4> <ul><li><p>特点：主要用于在大量文本数据中搜索关键字，而不是直接与索引中的值进行比较。</p></li> <li><p>用途：在文本字段上创建，用于全文搜索。</p></li> <li><p>使用场景：在文章管理系统、博客平台等应用中，经常需要根据文章标题或内容搜索相关文章。此时，可以在文章标题或内容字段上创建全文索引，以提高搜索效率。</p></li></ul> <blockquote><p>不同类型的索引在数据库管理系统中扮演着不同的角色，它们各有特点并适用于不同的使用场景。在选择索引类型时，需要根据实际的数据表结构和查询需求来决定。同时，还需要注意索引的创建和维护成本，避免过度索引导致的性能问题。</p></blockquote> <h4 id="索引的使用情况"><a href="#索引的使用情况" class="header-anchor">#</a> 索引的使用情况</h4> <p>在执行数据查询过程中，以下情况会用到索引：</p> <ul><li><p>查询条件中使用了索引列：当查询条件（如WHERE子句中的条件）中包含了索引列时，MySQL会尝试使用索引来加速查询。</p></li> <li><p>排序和分组操作中使用了索引列：如果查询中的排序（ORDER BY）或分组（GROUP BY）操作是基于索引列的，那么MySQL也可以利用索引来提高效率。</p></li> <li><p>覆盖索引：如果查询的列都包含在索引中（即索引覆盖），那么MySQL可以直接通过索引来获取数据，而无需回表查询。</p></li></ul> <h4 id="索引失效的情况"><a href="#索引失效的情况" class="header-anchor">#</a> 索引失效的情况</h4> <ul><li><p>查询条件中未使用索引列：如果查询条件中没有使用到任何索引列，那么MySQL将无法使用索引进行优化查询。</p></li> <li><p>数据类型不匹配：如果查询中使用了索引列，但数据类型与索引列的数据类型不匹配（如将字符串类型的列与数值类型进行比较），那么MySQL将无法使用索引。</p></li> <li><p>在索引列上进行计算或函数操作：在查询条件中对索引列进行函数操作或计算（如SELECT * FROM table WHERE YEAR(date_column) = 2023），会导致索引失效。</p></li> <li><p>索引列的顺序不正确：对于复合索引（包含多个列的索引），如果查询条件中的列的顺序与复合索引的列的顺序不一致，那么MySQL可能无法充分利用索引。</p></li> <li><p>使用LIKE进行模糊匹配：如果LIKE查询以通配符（%或_）开头，那么索引可能会失效。因为MySQL无法利用索引来快速定位到数据的起始位置。</p></li> <li><p>OR条件中的非索引列：如果OR条件中的某个字段不是索引列，那么MySQL可能无法利用索引来优化查询。</p></li> <li><p>索引列上的范围查询：虽然范围查询（如&lt;、&gt;、BETWEEN等）可以使用索引，但如果范围查询后还有其他非索引列的查询条件，那么这些条件可能无法利用索引。</p></li> <li><p>数据更新频繁：在数据更新频繁的情况下，索引的维护成本会增加，可能导致索引的查询性能下降。</p></li> <li><p>索引过多或过少：索引过多会占用额外的存储空间，并在数据更新时增加维护成本；索引过少则可能无法充分利用索引来提高查询性能。</p></li></ul> <h3 id="explain"><a href="#explain" class="header-anchor">#</a> EXPLAIN</h3> <blockquote><p>在MySQL中，EXPLAIN语句是一个强大的工具，用于获取MySQL如何执行SELECT语句的详细信息。它可以帮助开发人员和分析师理解查询的执行计划，包括如何连接表、是否使用了索引、是否进行了全表扫描等。这对于优化查询性能至关重要。</p></blockquote> <p>EXPLAIN的输出包含多个列，这些列提供了关于查询执行计划的详细信息。以下是一些常见的列及其含义：</p> <ul><li><p>id: SELECT的标识符。如果你的查询包含子查询，MySQL会为每个子查询分配一个唯一的ID。</p></li> <li><p>select_type: SELECT的类型，如SIMPLE（简单SELECT，不使用UNION或子查询等）、PRIMARY（查询中最外层的SELECT）、UNION等。</p> <ul><li>SIMPLE：简单 SELECT，不需要使用 UNION 操作或子查询。</li> <li>PRIMARY：如果查询包含子查询，最外层的 SELECT 被标记为 PRIMARY。</li> <li>UNION：UNION 操作中第二个或后面的 SELECT 语句。</li> <li>SUBQUERY：子查询中的第一个 SELECT。</li> <li>DERIVED：派生表的 SELECT 子查询。</li></ul></li> <li><p>table: 输出行所引用的表。</p></li> <li><p>partitions: 匹配的分区。</p></li> <li><p>type: 连接类型，如ALL（全表扫描）、index（索引扫描）、range（索引范围扫描）等。</p> <p>以下是链接类型判断性能从高到低的类型：</p> <ul><li>system：表只有一行记录（等于系统表），这是const类型的特例，平时不会出现，可以忽略不计。</li> <li>const：表示通过索引一次就找到了，const用于比较primary key 或者 unique索引。因为只需匹配一行数据，所有很快。如果将主键置于where列表中，mysql就能将该查询转换为一个const。</li> <li>eq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配。常见于主键 或 唯一索引扫描。</li> <li>ref：非唯一性索引扫描，返回匹配某个单独值的所有行。本质是也是一种索引访问，它返回所有匹配某个单独值的行，然而他可能会找到多个符合条件的行，所以它应该属于查找和扫描的混合体。</li> <li>range：只检索给定范围的行，使用一个索引来选择行。key列显示使用了那个索引。一般就是在where语句中出现了bettween、&lt;、&gt;、in等的查询。这种索引列上的范围扫描比全索引扫描要好。只需要开始于某个点，结束于另一个点，不用扫描全部索引。</li> <li>index：Full Index Scan，index与ALL区别为index类型只遍历索引树。这通常为ALL块，应为索引文件通常比数据文件小。（Index与ALL虽然都是读全表，但index是从索引中读取，而ALL是从硬盘读取）。</li> <li>ALL：Full Table Scan，遍历全表以找到匹配的行。</li></ul></li> <li><p>possible_keys: 显示可能应用在这张表上的索引，但这不意味着实际查询中会用到它们。</p></li> <li><p>key: 实际使用的索引。如果为NULL，则没有使用索引。</p></li> <li><p>key_len: 使用的索引的长度。在某些情况下，不是索引的全部部分都会被使用，这个值越小，索引越高效。</p></li> <li><p>ref: 显示索引的哪一列或常数被用于查找值。</p></li> <li><p>rows: MySQL认为必须检查的用来返回请求数据的行数，这个值越小越好。</p></li> <li><p>filtered: 表示返回结果的行占开始找到符合表连接条件的行的百分比，百分比越高越好。</p></li> <li><p>Extra: 包含不适合在其他列中显示但非常重要的额外信息，如是否使用了文件排序（Using filesort）、是否使用了临时表（Using temporary）等。</p> <ul><li>Using filesort：MySQL 无法利用索引完成排序操作。</li> <li>Using index：只使用索引的信息而不需要进一步查表来获取更多的信息。</li> <li>Using temporary：MySQL 需要使用临时表来存储结果集，常用于分组和排序。</li> <li>Impossible where：where子句会导致没有符合条件的行。</li> <li>Distinct：MySQL 发现第一个匹配行后，停止为当前的行组合搜索更多的行。</li> <li>Using where：查询的列未被索引覆盖，筛选条件并不是索引的前导列。</li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/maturest/docs/edit/master/back/mysql/primary.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/16/2024, 5:48:41 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/back/mysql/view.html" class="prev">
        视图函数与过程
      </a></span> <span class="next"><a href="/docs/back/mysql/left_prefix.html">
        最左前缀原则
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.12904a86.js" defer></script><script src="/docs/assets/js/2.6b092d03.js" defer></script><script src="/docs/assets/js/44.eba4df18.js" defer></script>
  </body>
</html>
